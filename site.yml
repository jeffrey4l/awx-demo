---
- hosts: all
  vars:
    failed: false
  gather_facts: false
  tasks:
    - name: pring hello world
      debug:
        msg: hello world
    - name: print /etc/resolv.conf
      shell: |
        cat /etc/resolv.conf
    - name: check failure
      fail:
      when:
        - failed | default(False)
